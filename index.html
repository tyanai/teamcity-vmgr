<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Cadence vManager Plugin for TeamCity : Adds an ability to launch a session or call Cadence vManager vAPI REST API dynamically as a step in your build.">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Cadence vManager Plugin for TeamCity</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/tyanai/teamcity-vmgr">View on GitHub</a>

          <h1 id="project_title">Cadence vManager Plugin for TeamCity</h1>
          <h2 id="project_tagline">Adds an ability to launch a session or call Cadence vManager vAPI REST API dynamically as a step in your build.</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/tyanai/teamcity-vmgr/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/tyanai/teamcity-vmgr/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h2>
<a id="cadence-vmanager-build-runner-plugin-for-teamcity" class="anchor" href="#cadence-vmanager-build-runner-plugin-for-teamcity" aria-hidden="true"><span class="octicon octicon-link"></span></a><strong>Cadence vManager Build Runner Plugin for TeamCity</strong>
</h2>

<p>This plugin adds an ability to perform REST over HTTP calls to Cadence vManager as a step in your build.</p>

<h3>
<a id="why-this-plugin-" class="anchor" href="#why-this-plugin-" aria-hidden="true"><span class="octicon octicon-link"></span></a><strong>Why this plugin ?</strong>
</h3>

<p>Cadence vManager (starting version 14.1 and above) is now exposing a REST API (vAPI) for performing automation queries and updates for its regression/test and coverage data.  This plugin enables you to add a remote execution for extracting runs information, reports data or even launching new sessions as part of your build process.</p>

<h3>
<a id="features" class="anchor" href="#features" aria-hidden="true"><span class="octicon octicon-link"></span></a><strong>Features</strong>
</h3>

<ol>
<li>Free-style job plugin (can perform all vManager API call).</li>
<li>Support static/dynamic API calls</li>
<li>Support dynamic authentication per user id.</li>
<li>Special build step for performing launch of vsif files dynamically.</li>
</ol>

<h3>
<a id="limitations" class="anchor" href="#limitations" aria-hidden="true"><span class="octicon octicon-link"></span></a><strong>Limitations</strong>
</h3>

<p>The plugin support for remote launching of vsif will be supported for Incisive 14.1 S5 and above.</p>

<h3>
<a id="configuration" class="anchor" href="#configuration" aria-hidden="true"><span class="octicon octicon-link"></span></a><strong>Configuration</strong>
</h3>

<p>After installing the plugin you'll get two new steps in the build step selection.</p>

<p><img src="https://raw.githubusercontent.com/tyanai/teamcity-vmgr/master/images/newStep.png" alt=""></p>

<ul>
<li>Choose "vManager API" if you need a free-style vAPI call to sends dynamic json input and receive a json output.</li>
<li>Choose "vManager Session Launcher" if you need to add a step for remote launching vsif (one or more).</li>
</ul>

<h3>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a><strong>Usage</strong>
</h3>

<p><strong>vManager API</strong></p>

<p>The step takes care for the following:</p>

<ol>
<li>Authentication.</li>
<li>Defining the API call.</li>
<li>Defining the json input string for the API (static/dynamic).</li>
<li>Saving the API result (json format) into the workspace. 
The below is an example of defining a static vAPI call for getting a list of runs:</li>
</ol>

<p><img src="https://raw.githubusercontent.com/tyanai/teamcity-vmgr/master/images/staticApi.png" alt=""></p>

<p>The below is an example of defining a dynamic vAPI call:</p>

<p><img src="https://raw.githubusercontent.com/tyanai/teamcity-vmgr/master/images/dynamicApi.png" alt=""></p>

<p>In case of a need in dynamically change the jSON input for the API per step, the pre-step should create a file with the relevant jSON string to be sent to the vAPI.
The input file can be placed anywhere within the agent accessible path . In case this field is empty, The file name need to be: ﻿﻿﻿$CHECKOUT_DIR/$BUILD_ID/vapi.input</p>

<p>Please fill this field only in case, you want to hard code the input file name, to be consist across all builds.</p>

<p><strong>vManager Session Launcher</strong></p>

<p>The step takes care for the following:</p>

<ol>
<li>Authentication.</li>
<li>Launching a vsif that is located on the NFS and is available to vManager Server.</li>
</ol>

<p>The below is an example of defining a static vsif call:</p>

<p><img src="https://raw.githubusercontent.com/tyanai/teamcity-vmgr/master/images/staticVsif.png" alt=""></p>

<p>The below is an example of defining a dynamic launch call with  multiple vsif files:</p>

<p><img src="https://raw.githubusercontent.com/tyanai/teamcity-vmgr/master/images/dynamicVsif.png" alt=""></p>

<p>In case of a need in dynamically selecting the vsif files to get launched per step, the pre-step should create a file with the relevant data. The input file can be placed anywhere within the agent accessible path. The data insist for various lines with the full paths of the relevant vsif files to be launched, new line for each additional vsif file.</p>

<p>In case this field is empty, The file name need to be: $CHECKING_DIR/$BUILD_ID/vsif.input
Please fill this field only in case, you want to hard code the input file name, to be consist across all builds.</p>

<p><strong>Authentication</strong></p>

<p><img src="https://raw.githubusercontent.com/tyanai/teamcity-vmgr/master/images/authentication.png" alt=""></p>

<p>In case of a need in dynamically selecting the user name per step, the pre-step should place into the workspace directory a file with single line that contains the userid to be used.
The file name should be: $CHECKING_DIR/$BUILD_ID/user.input
The job will pick the userid which is in the file, and connect to vAPI using this userid and the vAPI secret key.</p>

<p>You can download the plugin from <a href="https://github.com/tyanai/teamcity-vmgr/blob/master/plugin/vmgr-runner.zip?raw=true">here</a>.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Cadence vManager Plugin for TeamCity maintained by <a href="https://github.com/tyanai">tyanai</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
